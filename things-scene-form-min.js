(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _mixinHtmlElement=require("./mixin-html-element");var _mixinHtmlElement2=_interopRequireDefault(_mixinHtmlElement);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var NATURE={mutable:false,resizable:true,rotatable:true,properties:[{type:"string",label:"method",name:"method",property:"method"},{type:"string",label:"action",name:"action",property:"action"},{type:"string",label:"name",name:"name",property:"name"}]};var _scene=scene,Container=_scene.Container;var Form=function(_MixinHTMLElement){_inherits(Form,_MixinHTMLElement);function Form(){_classCallCheck(this,Form);return _possibleConstructorReturn(this,(Form.__proto__||Object.getPrototypeOf(Form)).apply(this,arguments))}_createClass(Form,[{key:"setElementProperties",value:function setElementProperties(form){var _ref=this.model.htmlConfig||{},_ref$action=_ref.action,action=_ref$action===undefined?"":_ref$action,_ref$method=_ref.method,method=_ref$method===undefined?"POST":_ref$method,_ref$name=_ref.name,name=_ref$name===undefined?"":_ref$name;form.action=action;form.method=method;form.name=name}},{key:"onload",value:function onload(e){var _this2=this;var result=JSON.parse(e.target.response);console.log(result);Object.keys(result).forEach(function(id){console.log(id,result[id]);_this2.root.variable(id,result[id])})}},{key:"oncreate_element",value:function oncreate_element(form){var _this3=this;var _=function _(e){e.preventDefault();var url=form.action;var xhr=new XMLHttpRequest;xhr.withCredentials=true;var params=[].filter.call(form.elements,function(el){return true}).filter(function(el){return!!el.name}).filter(function(el){return!el.disabled}).map(function(el){return encodeURIComponent(el.name)+"="+encodeURIComponent(el.value)}).join("&");if(form.method=="get")xhr.open(form.method,url+"?"+params);else xhr.open(form.method,url);var contentTypes=["x-form-urlencoded","json"].map(function(type){return"application/"+type}).join(";");xhr.setRequestHeader("Content-type",contentTypes);xhr.onloadend=_this3.onload.bind(_this3);if(form.method=="get")xhr.send();else xhr.send(params)};form.addEventListener("submit",_)}},{key:"nature",get:function get(){return NATURE}}]);return Form}((0,_mixinHtmlElement2.default)(Container));exports.default=Form;scene.Component.register("form",Form)},{"./mixin-html-element":5}],2:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _mixinHtmlElement=require("./mixin-html-element");var _mixinHtmlElement2=_interopRequireDefault(_mixinHtmlElement);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var _scene=scene,Component=_scene.Component,RectPath=_scene.RectPath;var HTMLElement=function(_MixinHTMLElement){_inherits(HTMLElement,_MixinHTMLElement);function HTMLElement(){_classCallCheck(this,HTMLElement);return _possibleConstructorReturn(this,(HTMLElement.__proto__||Object.getPrototypeOf(HTMLElement)).apply(this,arguments))}return HTMLElement}((0,_mixinHtmlElement2.default)(RectPath(Component)));exports.default=HTMLElement},{"./mixin-html-element":5}],3:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _form=require("./form");Object.defineProperty(exports,"Form",{enumerable:true,get:function get(){return _interopRequireDefault(_form).default}});var _input=require("./input");Object.defineProperty(exports,"Input",{enumerable:true,get:function get(){return _interopRequireDefault(_input).default}});var _select=require("./select");Object.defineProperty(exports,"Select",{enumerable:true,get:function get(){return _interopRequireDefault(_select).default}});var _textarea=require("./textarea");Object.defineProperty(exports,"TextArea",{enumerable:true,get:function get(){return _interopRequireDefault(_textarea).default}});function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},{"./form":1,"./input":4,"./select":7,"./textarea":8}],4:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _htmlElement=require("./html-element");var _htmlElement2=_interopRequireDefault(_htmlElement);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var NATURE={mutable:false,resizable:true,rotatable:true,properties:[{type:"string",label:"value",name:"value",property:"value"}]};var Input=function(_HTMLElement){_inherits(Input,_HTMLElement);function Input(){_classCallCheck(this,Input);return _possibleConstructorReturn(this,(Input.__proto__||Object.getPrototypeOf(Input)).apply(this,arguments))}_createClass(Input,[{key:"createElement",value:function createElement(){var _this2=this;_get(Input.prototype.__proto__||Object.getPrototypeOf(Input.prototype),"createElement",this).call(this);this.element.value=this.get("value")||"";this.element.onchange=function(e){_this2.set("value",_this2.element.value)}}},{key:"setElementProperties",value:function setElementProperties(element){var _model=this.model,_model$inputType=_model.inputType,inputType=_model$inputType===undefined?"":_model$inputType,_model$name=_model.name,name=_model$name===undefined?"":_model$name;this.element.type=inputType;this.element.name=name}},{key:"onchange",value:function onchange(after,before){_get(Input.prototype.__proto__||Object.getPrototypeOf(Input.prototype),"onchange",this).call(this,after,before);if(after.hasOwnProperty("value")&&this._element){this._element.value=after.value}}},{key:"nature",get:function get(){return NATURE}}]);return Input}(_htmlElement2.default);exports.default=Input;scene.Component.register("input",Input)},{"./html-element":2}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _reposition=require("./reposition");var _reposition2=_interopRequireDefault(_reposition);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}exports.default=function(superclass){var A=function(_superclass){_inherits(A,_superclass);function A(){_classCallCheck(this,A);return _possibleConstructorReturn(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}_createClass(A,[{key:"isHTMLElement",value:function isHTMLElement(){return true}},{key:"setElementProperties",value:function setElementProperties(element){throw new Error("Not Implemented Yet")}},{key:"createElement",value:function createElement(){this._element=document.createElement(this.tag);if(!this._element)return;this.setElementProperties(this._element);if(this.parent.isHTMLElement&&this.parent.isHTMLElement())this.parent.element.appendChild(this._element);else this.root.model_layer.overlay.appendChild(this._element);(0,_reposition2.default)(this);this.oncreate_element&&this.oncreate_element(this._element)}},{key:"disposeElement",value:function disposeElement(){var element=this._element;element&&element.parentElement&&element.parentElement.removeChild(element);delete this._element}},{key:"ready",value:function ready(){!this._element&&this.createElement()}},{key:"added",value:function added(){if(!this._element){return}if(this.parent.isHTMLElement&&this.parent.isHTMLElement())this.parent.element.appendChild(this._element);else this.root.model_layer.overlay.appendChild(this._element);(0,_reposition2.default)(this)}},{key:"dispose",value:function dispose(){this.disposeElement(this);_get(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"dispose",this).call(this)}},{key:"onchange",value:function onchange(after,before){this.setElementProperties();(0,_reposition2.default)(this)}},{key:"element",get:function get(){return this._element}},{key:"tag",get:function get(){return this.get("type")}},{key:"hasTextProperty",get:function get(){return false}}]);return A}(superclass);return A}},{"./reposition":6}],6:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.default=reposition;var _scene=scene,DEFAULT=_scene.DEFAULT;function scaleAndRotationToTop(component){var rotation=0,scale_x=1,scale_y=1;var parent=component;while(parent){rotation+=parent.get("rotation")||0;var _ref=parent.get("scale")||{x:1,y:1},x=_ref.x,y=_ref.y;scale_x*=x||1;scale_y*=y||1;parent=parent.parent}return{rotation:rotation,scale_x:scale_x,scale_y:scale_y}}var SCALE_DEFAULT={x:1,y:1};var TRANSLATE_DEFAULT={x:0,y:0};function reposition(component){var _component$model=component.model,_component$model$rota=_component$model.rotation,rotation=_component$model$rota===undefined?0:_component$model$rota,_component$model$scal=_component$model.scale,scale=_component$model$scal===undefined?SCALE_DEFAULT:_component$model$scal,_component$model$tran=_component$model.translate,translate=_component$model$tran===undefined?TRANSLATE_DEFAULT:_component$model$tran,_component$model$bold=_component$model.bold,bold=_component$model$bold===undefined?DEFAULT.BOLD:_component$model$bold,_component$model$ital=_component$model.italic,italic=_component$model$ital===undefined?DEFAULT.ITALIC:_component$model$ital,_component$model$font=_component$model.fontFamily,fontFamily=_component$model$font===undefined?DEFAULT.FONT_FAMILY:_component$model$font,_component$model$font2=_component$model.fontColor,fontColor=_component$model$font2===undefined?DEFAULT.FONT_COLOR:_component$model$font2,_component$model$text=_component$model.textAlign,textAlign=_component$model$text===undefined?DEFAULT.TEXT_ALIGN:_component$model$text,_component$model$padd=_component$model.paddingTop,paddingTop=_component$model$padd===undefined?0:_component$model$padd,_component$model$padd2=_component$model.paddingBottom,paddingBottom=_component$model$padd2===undefined?0:_component$model$padd2,_component$model$padd3=_component$model.paddingLeft,paddingLeft=_component$model$padd3===undefined?0:_component$model$padd3,_component$model$padd4=_component$model.paddingRight,paddingRight=_component$model$padd4===undefined?0:_component$model$padd4,_component$model$font3=_component$model.fontSize,fontSize=_component$model$font3===undefined?DEFAULT.FONT_SIZE:_component$model$font3,backgroundColor=_component$model.backgroundColor;var _component$bounds=component.bounds,left=_component$bounds.left,top=_component$bounds.top,width=_component$bounds.width,height=_component$bounds.height;var element=component.element;var border_x=3;var border_y=3;element.style.fontFamily=fontFamily;element.style.fontSize=fontSize+"px";element.style.position="absolute";element.style.left=left+"px";element.style.top=top+"px";element.style.width=width-border_x*2+"px";element.style.height=height-border_y*2+"px";element.style.outline="none";element.style.backgroundColor=backgroundColor;element.style.display="inline-block";element.style.color=fontColor;if(bold)element.style.fontWeight="bold";if(italic)element.style.fontStyle="italic";switch(textAlign){case"right":case"end":element.style.textAlign="right";break;case"justify":case"left":case"start":element.style.textAlign="left";break;case"center":default:element.style.textAlign="center";break}var transform="rotate("+rotation+"rad) scale("+scale.x+", "+scale.y+")";["-webkit-","-moz-","-ms-","-o-",""].forEach(function(prefix){element.style[prefix+"transform"]=transform})}},{}],7:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _htmlElement=require("./html-element");var _htmlElement2=_interopRequireDefault(_htmlElement);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var NATURE={mutable:false,resizable:true,rotatable:true,properties:[{type:"string",label:"value",name:"value",property:"value"},{type:"number",label:"size",name:"size",property:"size"},{type:"string",label:"name",name:"name",property:"name"}]};var Select=function(_HTMLElement){_inherits(Select,_HTMLElement);function Select(){_classCallCheck(this,Select);return _possibleConstructorReturn(this,(Select.__proto__||Object.getPrototypeOf(Select)).apply(this,arguments))}_createClass(Select,[{key:"createElement",value:function createElement(){var _this2=this;_get(Select.prototype.__proto__||Object.getPrototypeOf(Select.prototype),"createElement",this).call(this);var _model$options=this.model.options,options=_model$options===undefined?[]:_model$options;options.forEach(function(option){var el=document.createElement("option");el.value=option.value;el.text=option.text;_this2.element.appendChild(el)});this.element.value=this.get("value")||"";this.element.onchange=function(e){_this2.set("value",_this2.element.value)}}},{key:"setElementProperties",value:function setElementProperties(){var _model=this.model,size=_model.size,name=_model.name;this.element.size=size;this.element.name=name}},{key:"onchange",value:function onchange(after,before){_get(Select.prototype.__proto__||Object.getPrototypeOf(Select.prototype),"onchange",this).call(this,after,before);if(after.hasOwnProperty("value")&&this.element){this.element.value=after.value}}},{key:"nature",get:function get(){return NATURE}}]);return Select}(_htmlElement2.default);exports.default=Select;scene.Component.register("select",Select)},{"./html-element":2}],8:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();var _get=function get(object,property,receiver){if(object===null)object=Function.prototype;var desc=Object.getOwnPropertyDescriptor(object,property);if(desc===undefined){var parent=Object.getPrototypeOf(object);if(parent===null){return undefined}else{return get(parent,property,receiver)}}else if("value"in desc){return desc.value}else{var getter=desc.get;if(getter===undefined){return undefined}return getter.call(receiver)}};var _htmlElement=require("./html-element");var _htmlElement2=_interopRequireDefault(_htmlElement);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return call&&(typeof call==="object"||typeof call==="function")?call:self}function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass)}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass}var NATURE={mutable:false,resizable:true,rotatable:true,properties:[{type:"string",label:"value",name:"value",property:"value"},{type:"number",label:"size",name:"size",property:"size"},{type:"string",label:"name",name:"name",property:"name"}]};var TextArea=function(_HTMLElement){_inherits(TextArea,_HTMLElement);function TextArea(){_classCallCheck(this,TextArea);return _possibleConstructorReturn(this,(TextArea.__proto__||Object.getPrototypeOf(TextArea)).apply(this,arguments))}_createClass(TextArea,[{key:"createElement",value:function createElement(){var _this2=this;_get(TextArea.prototype.__proto__||Object.getPrototypeOf(TextArea.prototype),"createElement",this).call(this);this.element.value=this.get("value")||"";this.element.onchange=function(e){_this2.set("value",_this2.element.value)}}},{key:"setElementProperties",value:function setElementProperties(element){var _model$name=this.model.name,name=_model$name===undefined?"":_model$name;this.element.name=name}},{key:"onchange",value:function onchange(after,before){_get(TextArea.prototype.__proto__||Object.getPrototypeOf(TextArea.prototype),"onchange",this).call(this,after,before);if(after.hasOwnProperty("value")&&this.element){this.element.value=after.value}}},{key:"nature",get:function get(){return NATURE}}]);return TextArea}(_htmlElement2.default);exports.default=TextArea;scene.Component.register("textarea",TextArea)},{"./html-element":2}]},{},[3]);