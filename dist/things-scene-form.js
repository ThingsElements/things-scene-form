!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t){e.exports=scene},function(e,t,n){e.exports=n(2)},function(e,t,n){"use strict";n.r(t);var r=n(0);const a={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"select",label:"method",name:"method",property:{options:[{display:"GET",value:"GET"},{display:"POST",value:"POST"}]}},{type:"string",label:"action",name:"action"},{type:"number",label:"period",name:"period"},{type:"string",label:"name",name:"name"},{type:"string",label:"authorization",name:"authorization"},{type:"select",label:"format",name:"format",property:{options:[{display:"JSON",value:"JSON"},{display:"TEXT",value:"TEXT"}]}},{type:"checkbox",label:"with-credentials",name:"withCredentials"},{type:"checkbox",label:"submit-on-load",name:"submitOnLoad"}],"value-property":"action"};class s extends r.HTMLOverlayContainer{dispose(){super.dispose(),this._stopRepeater()}dispose(){super.dispose(),this._stopRepeater()}setElementProperties(e){var{action:t="",method:n="POST",name:r=""}=this.state;e.action=t,e.method=n,e.name=r}get action(){return this.state.action}set action(e){this.setState("action",e),this._startRepeater()}get period(){return 1e3*this.state.period}set period(e){this.setState("period",e),this._startRepeater()}_startRepeater(){this._stopRepeater(),this.app.isViewMode&&this.period&&(this._repeatInterval=setInterval(this._submit.bind(this),this.period))}_stopRepeater(){this._repeatInterval&&clearInterval(this._repeatInterval)}_onload(e){var t=e.target.response;try{this.setState("data","JSON"==this.get("format")?JSON.parse(t):t)}catch(e){console.error(e)}}oncreate_element(e){if(this.app.isViewMode){e.onsubmit=(t=>{var n=e.action,r=new XMLHttpRequest,a=[].filter.call(e.elements,function(e){return"radio"!=e.type&&"checkbox"!=e.type||e.checked}).filter(function(e){return!!e.name}).filter(function(e){return!e.disabled}).map(function(e){return encodeURIComponent(e.name)+"="+encodeURIComponent(e.value)}).join("&");return r.onloadend=this._onload.bind(this),"get"==e.method?r.open(e.method,n+"?"+a):r.open(e.method,n),r.setRequestHeader("Content-Type",["x-www-form-urlencoded","json"].map(e=>"application/"+e).concat("text/plain").join(";")),this.get("authorization")&&r.setRequestHeader("Authorization",this.get("authorization")),this.get("withCredentials")&&(r.withCredentials=!0),"get"==e.method?r.send():r.send(a),t.preventDefault(),!1}),this.getState("submitOnLoad")&&setTimeout(this._submit.bind(this),100),this._startRepeater()}}_submit(){this.element.dispatchEvent(new Event("submit",{cancelable:!0}))}get nature(){return a}}r.Component.register("form",s);const l={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"legend",name:"legend"}]};class i extends r.HTMLOverlayContainer{setElementProperties(e){var{legend:t=""}=this.state;t?this.legendElement.textContent=t:(this._legendElement&&this.element.removeChild(this._legendElement),delete this._legendElement)}get legendElement(){if(!this._legendElement){var e=document.createElement("legend");this.element.appendChild(e),this._legendElement=e}return this._legendElement}get nature(){return l}}r.Component.register("fieldset",i);const o={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"value",name:"value"},{type:"number",label:"size",name:"size"},{type:"string",label:"name",name:"name"},{type:"checkbox",label:"submit-on-change",name:"submitOnChange"},{type:"checkbox",label:"copy-value-to-data",name:"copyValueToData"},{type:"string",label:"text-field",name:"textField"},{type:"string",label:"value-field",name:"valueField"},{type:"options",label:"options",name:"options"}],"value-property":"value"};class p extends r.HTMLOverlayElement{get nature(){return o}buildOptions(){var e,{options:t=[],textField:n,valueField:r}=this.state;!t instanceof Array&&(t=[]),this.element.textContent="",t.map&&t.map((t,a)=>{let s,l;return s=n?"(index)"==n?a:t&&t[n]:t&&(t.text||t),l=r?"(index)"==r?a:t&&t[r]:t&&(t.value||t),void 0===e&&(e=l),{text:s,value:l}}).forEach(e=>{var t=document.createElement("option");t.value="string"==typeof e.value?e.value:JSON.stringify(e.value),t.text=e.text,this.element.appendChild(t)}),this.value=JSON.stringify(e)}createElement(){super.createElement(),this.buildOptions();var e=this.element;e.value=this.get("value")||"",e.onchange=(t=>{this.set("value",e.value),this.get("submitOnChange")&&e.form&&e.form.dispatchEvent(new Event("submit"))})}setElementProperties(e){var{size:t,name:n}=this.state;e.size=t,e.name=n}onchange(e,t){if(super.onchange(e,t),e.hasOwnProperty("value")&&this.element){if(this.element.value=e.value,this.get("copyValueToData"))try{this.data=JSON.parse(e.value)}catch(t){Object(r.warn)(t),this.data=e.value}this.get("submitOnChange")&&this.element.form&&this.element.form.dispatchEvent(new Event("submit"))}e.hasOwnProperty("options")&&this.buildOptions()}get options(){return this.getState("options")}set options(e){this.setState("options",e)}}r.Component.register("select",p);const m={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"name",name:"name"},{type:"string",label:"value",name:"text"},{type:"string",label:"placeholder",name:"placeholder"},{type:"checkbox",label:"readonly",name:"readonly"},{type:"checkbox",label:"disabled",name:"disabled"},{type:"number",label:"max-length",name:"maxlength"}],"value-property":"text"};class u extends r.HTMLOverlayElement{get nature(){return m}get tagName(){return"textarea"}createElement(){super.createElement(),this.element.style.resize="none",this.element.onchange=(e=>{this.value=this.element.value})}setElementProperties(e){var{name:t="",placeholder:n="",disabled:r,readonly:a,maxlength:s}=this.state;try{e.name=t,e.placeholder=n,e.disabled=r,e.readonly=a,e.maxlength=s,e.value=this.value}catch(e){error(e)}this.data=this.value}}r.Component.register("textarea",u);const h={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"value",name:"text"}],"value-property":"text"};class c extends r.HTMLOverlayElement{get tagName(){return"button"}get nature(){return h}setElementProperties(e){this.element.textContent=this.value}}r.Component.register("button",c);const d={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"name",name:"name"},{type:"string",label:"value",name:"text"},{type:"string",label:"placeholder",name:"placeholder"},{type:"checkbox",label:"readonly",name:"readonly"},{type:"checkbox",label:"disabled",name:"disabled"},{type:"number",label:"max-length",name:"maxlength"}],"value-property":"text"};class b extends r.HTMLOverlayElement{get nature(){return d}get tagName(){return"input"}get inputType(){return this.get("type").substr(6)}createElement(){super.createElement(),this.element.onchange=(e=>{this.value=this.element.value})}setElementProperties(e){var{name:t="",placeholder:n="",disabled:a,readonly:s,maxlength:l}=this.state;try{e.type=this.inputType,e.name=t,e.placeholder=n,e.disabled=a,e.readonly=s,e.maxlength=l,e.value=this.value}catch(e){Object(r.error)(e)}this.data=this.value}}["input","input-text","input-password","input-email","input-search","input-time","input-datetime-local","input-month","input-week"].forEach(e=>r.Component.register(e,b));const g={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"value",name:"value"},{type:"number",label:"size",name:"size"},{type:"string",label:"name",name:"name"},{type:"checkbox",label:"checked",name:"checked"}],"value-property":"value"};class y extends b{get nature(){return g}get tagName(){return"input"}get inputType(){return"radio"}createElement(){if(this.element=document.createElement("label"),this.element){var e=document.createElement("input");this.element.appendChild(e);var t=document.createTextNode(this.get("text"));this.element.appendChild(t),this.setElementProperties(this.element),this.parent.isHTMLElement&&this.parent.isHTMLElement()?this.parent.element.appendChild(this.element):this.root.model_layer.overlay.appendChild(this.element),r.Component.reposition(this),this.oncreate_element&&this.oncreate_element(this.element)}}setElementProperties(e){var t=this.element.querySelector("text"),n=this.element.querySelector("input"),{text:r,checked:a,value:s}=this.state;t&&(t.textContent=r),n&&(n.checked=a,n.value=s),super.setElementProperties(n)}}r.Component.register("input-radio",y);const v={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"value",name:"value"},{type:"number",label:"size",name:"size"},{type:"string",label:"name",name:"name"},{type:"checkbox",label:"checked",name:"checked"}],"value-property":"value"};class x extends b{get nature(){return v}get tagName(){return"input"}get inputType(){return"checkbox"}get hasTextProperty(){return!0}createElement(){if(this.element=document.createElement("label"),this.element){var e=document.createElement("input");this.element.appendChild(e);var t=document.createTextNode(this.get("text"));this.element.appendChild(t),this.setElementProperties(this.element),this.parent.isHTMLElement&&this.parent.isHTMLElement()?this.parent.element.appendChild(this.element):this.root.model_layer.overlay.appendChild(this.element),r.Component.reposition(this),this.oncreate_element&&this.oncreate_element(this.element)}}setElementProperties(e){var t=this.element.querySelector("text"),n=this.element.querySelector("input"),{text:r,checked:a,value:s}=this.state;t&&(t.textContent=r),n&&(n.checked=a,n.value=s),super.setElementProperties(n)}}r.Component.register("input-checkbox",x);const f={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"src",name:"src"}],"value-property":"src"};class E extends r.HTMLOverlayElement{setElementProperties(e){var{src:t=""}=this.state;e.src!=t&&(e.src=t)}get nature(){return f}}r.Component.register("iframe",E);const A={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"src",name:"src"}],"value-property":"src"};class C extends r.HTMLOverlayElement{setElementProperties(e){var{src:t=""}=this.state;e.src!=t&&(e.src=t)}get src(){return this.get("src")}set src(e){this.set("src",e)}get nature(){return A}}r.Component.register("img",C);const T={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"src",name:"src"},{type:"checkbox",label:"started",name:"started"}],"value-property":"src"};class O extends r.HTMLOverlayElement{setElementProperties(e){var{src:t="",started:n}=this.state;e.src!=t&&(e.src=t),n?e.play():e.pause()}get src(){return this.getState("src")}set src(e){this.setState("src",e)}get started(){return this.getState("started")}set started(e){this.setState("started",e)}get nature(){return T}}r.Component.register("video",O);const P={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"href",name:"href",property:"href"},{type:"select",label:"target",name:"target",property:{options:[{display:"self",value:"_self"},{display:"blank",value:"_blank"},{display:"parent",value:"_parent"},{display:"top",value:"_top"}]}}],"value-property":"href"};class S extends r.HTMLOverlayContainer{get tagName(){return"a"}get href(){return this.get("href")}set href(e){this.set("href",e)}setElementProperties(e){var{href:t="",target:n}=this.state;e.href!=t&&(e.href=t),e.target=n,0==this.components.length&&(this.element.textContent=this.text||t)}get nature(){return P}}r.Component.register("link",S);const k={mutable:!1,resizable:!0,rotatable:!0};class M extends r.HTMLOverlayContainer{setElementProperties(e){e.textContent=this.text}get tagName(){return"div"}get nature(){return k}}r.Component.register("div",M);const _={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"name",name:"name"},{type:"number",label:"value",name:"text"},{type:"number",label:"min",name:"min"},{type:"number",label:"max",name:"max"},{type:"number",label:"step",name:"step"}],"value-property":"text"};class z extends b{get nature(){return _}setElementProperties(e){super.setElementProperties(e);var{min:t=0,max:n=100,step:r=1}=this.state;e.min=t,e.max=n,e.step=r,e.value=this.value}}r.Component.register("input-number",z),r.Component.register("input-range",z);const w={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"name",name:"name"},{type:"date",label:"value",name:"text"},{type:"date",label:"min",name:"min"},{type:"date",label:"max",name:"max"}],"value-property":"text"};class H extends b{get nature(){return w}setElementProperties(e){super.setElementProperties(e);var{min:t,max:n}=this.state;e.min=t,e.max=n}}r.Component.register("input-date",H);const L={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"name",name:"name"},{type:"string",label:"value",name:"text"},{type:"checkbox",label:"multiple",name:"multiple"}],"value-property":"text"};class R extends b{get nature(){return L}setElementProperties(e){super.setElementProperties(e),e.multiple=!!this.state.multiple}}r.Component.register("input-file",R);const N={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"name",name:"name"},{type:"color",label:"value",name:"text"}],"value-property":"text"};class j extends b{get nature(){return N}setElementProperties(e){super.setElementProperties(e)}}r.Component.register("input-color",j);const I={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"string",label:"name",name:"name"},{type:"string",label:"value",name:"text"}],"value-property":"text"};class F extends b{get nature(){return I}setElementProperties(e){super.setElementProperties(e)}}r.Component.register("input-button",F),r.Component.register("input-submit",F),r.Component.register("input-reset",F);const V={mutable:!1,resizable:!0,rotatable:!0,properties:[{type:"textarea",label:"template",name:"template"},{type:"string",label:"apply-to",name:"applyTo"}]},D={type:"pattern",fitPattern:!0,image:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAMFBMVEUAAAAdHR0AAAAAAAAAAAAREREODg4AAAATExMAAAAAAAAAAAAAAAAAAAAWFhYAAABtUS6TAAAAD3RSTlMArnboZDwVtVUHmMTU9CygGbkuAAABBklEQVR42u3Vy47DMAgFUMbE78f9/7+dqpVKFNUzwKqLnD0RvjGYbrdvF8tK9JBWieTRAO6tdQYyeWS8DfIYeONEdmlCLE+GOClkV3ASyC7gpPn+ouiODAdOeJkjHMAZF2OCE1eHK0BfkLXho5yU8XVsjKWKj7E1iya/44kvpcdLJa3LOdg3zIIr2fg7qEd4umYQXpJqiPZyVbQwsMXJtoq889CwkUknMT6ai5QOfBRcb4oY1fMmiBnV1TFk+YDooST6T30UM7a4h5hoS4r/wjnEusleLeiusPFKFwhXCx0GXHUjZBmrDJNRfQ2IYthDYv/grwmrqG1AtV0ShKuF+ONQ6Hb7Hr9EkkNRgwrYbAAAAABJRU5ErkJggg=="};class J extends r.HTMLOverlayContainer{createElement(){super.createElement(),this.element.value=this.get("value")||"",this.element.onchange=(e=>{this.set("value",this.element.value)})}dispose(){super.dispose(),this.targets&&this.targets.forEach(e=>e.shadowRoot.innerHTML="<slot></slot>"),delete this.targets}setElementProperties(e){e.innerHTML=this.state.template}reposition(){super.reposition();var e=this.targets||[],t=this.rootModel&&Array.prototype.slice.call(this.rootModel.overlay.querySelectorAll(this.state.applyTo));t&&t.forEach(t=>{try{!t.shadowRoot&&t.attachShadow({mode:"open"}),t.shadowRoot.innerHTML=this.state.template}catch(e){Object(r.error)(e)}let n=e.indexOf(t);n>=0&&e.splice(n,1)}),e.forEach(e=>e.shadowRoot.innerHTML="<slot></slot>"),this.targets=t}get tagName(){return"template"}get fillStyle(){return D}get nature(){return V}}r.Component.register("template",J),n.d(t,"Form",function(){return s}),n.d(t,"FieldSet",function(){return i}),n.d(t,"Select",function(){return p}),n.d(t,"TextArea",function(){return u}),n.d(t,"Button",function(){return c}),n.d(t,"Radio",function(){return y}),n.d(t,"CheckBox",function(){return x}),n.d(t,"IFrame",function(){return E}),n.d(t,"Img",function(){return C}),n.d(t,"Video",function(){return O}),n.d(t,"Link",function(){return S}),n.d(t,"Div",function(){return M}),n.d(t,"Input",function(){return b}),n.d(t,"InputNumber",function(){return z}),n.d(t,"InputDate",function(){return H}),n.d(t,"InputFile",function(){return R}),n.d(t,"InputColor",function(){return j}),n.d(t,"InputSubmit",function(){return F}),n.d(t,"Template",function(){return J})}]);
//# sourceMappingURL=things-scene-form.js.map